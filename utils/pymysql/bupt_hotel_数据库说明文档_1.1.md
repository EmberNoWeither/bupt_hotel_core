# 数据库设计文档

**数据库名：** bupt_hotel

**文档版本：** 1.1

**文档描述：** 数据库说明文档
| 表名                  | 说明       |
| :-------------------- | :--------- |
| [air_conditioner](#air_conditioner) | 空调 |
| [air_conditioner_logs](#air_conditioner_logs) | 记录每一次空调变化 |
| [bill](#bill) | 账单 |
| [guest](#guest) | 顾客信息 |
| [guest_history](#guest_history) | 保存历史顾客信息，用于备案 |
| [repair](#repair) | 维修信息 |
| [room](#room) | 房间信息 |
**表名：** <a id="air_conditioner">air_conditioner</a>

**说明：** 空调

**数据列：**

| 序号 | 名称 | 数据类型 |  长度  | 小数位 | 允许空值 | 主键 | 默认值 | 说明 |
| :--: | :--- | :------: | :----: | :----: | :------: | :--: | :----: | :--: |
|  1   | id |   int   | 10 |   0    |    N     |  Y   |       | 空调编号(主键)  |
|  2   | status |   int   | 10 |   0    |    N     |  N   |   2    | 1：使用中，2：未使用，3：故障中  |
|  3   | tem |   int   | 10 |   0    |    N     |  N   |   20    | 设定温度  |
|  4   | wind_spd |   int   | 10 |   0    |    N     |  N   |   1    | 空调风速1：静音2：低速3：中速4：高速5：强劲  |
|  5   | wind_drc |   int   | 10 |   0    |    N     |  N   |   3    | 风向1：左右2：上下3：定向  |
|  6   | mode |   int   | 10 |   0    |    N     |  N   |   1    | 模式信息1：制冷2：制热3：通风4：除湿  |
|  7   | error_detail |   varchar   | 100 |   0    |    Y     |  N   |       |   |
**表名：** <a id="air_conditioner_logs">air_conditioner_logs</a>

**说明：** 记录每一次空调变化

**数据列：**

| 序号 | 名称 | 数据类型 |  长度  | 小数位 | 允许空值 | 主键 | 默认值 | 说明 |
| :--: | :--- | :------: | :----: | :----: | :------: | :--: | :----: | :--: |
|  1   | log_id |   int   | 10 |   0    |    N     |  Y   |       |   |
|  2   | air_conditioner_id |   int   | 10 |   0    |    N     |  N   |       |   |
|  3   | change_time |   datetime   | 19 |   0    |    N     |  N   |       |   |
|  4   | info |   json   | 1073741824 |   0    |    N     |  N   |       | 空调状态信息  |
**表名：** <a id="bill">bill</a>

**说明：** 账单

**数据列：**

| 序号 | 名称 | 数据类型 |  长度  | 小数位 | 允许空值 | 主键 | 默认值 | 说明 |
| :--: | :--- | :------: | :----: | :----: | :------: | :--: | :----: | :--: |
|  1   | id |   int   | 10 |   0    |    N     |  Y   |       | 账单id  |
|  2   | room_id |   varchar   | 20 |   0    |    N     |  N   |       |   |
|  3   | runtime |   int   | 10 |   0    |    Y     |  N   |       | 使用总时长  |
|  4   | power_usage |   float   | 12 |   0    |    N     |  N   |   0    | 总用电量  |
|  5   | power_cost |   float   | 12 |   0    |    N     |  N   |   0    | 总用金额（单位：元）  |
|  6   | create_time |   datetime   | 19 |   0    |    Y     |  N   |       | 订单创建时间  |
**表名：** <a id="guest">guest</a>

**说明：** 顾客信息

**数据列：**

| 序号 | 名称 | 数据类型 |  长度  | 小数位 | 允许空值 | 主键 | 默认值 | 说明 |
| :--: | :--- | :------: | :----: | :----: | :------: | :--: | :----: | :--: |
|  1   | id_card |   varchar   | 18 |   0    |    N     |  Y   |       | 身份证号  |
|  2   | room_id |   int   | 10 |   0    |    N     |  N   |       | 所在房间  |
|  3   | phone_number |   varchar   | 11 |   0    |    N     |  N   |       | 手机号  |
|  4   | sign_time |   datetime   | 19 |   0    |    Y     |  N   |       | 入住时间  |
**表名：** <a id="guest_history">guest_history</a>

**说明：** 保存历史顾客信息，用于备案

**数据列：**

| 序号 | 名称 | 数据类型 |  长度  | 小数位 | 允许空值 | 主键 | 默认值 | 说明 |
| :--: | :--- | :------: | :----: | :----: | :------: | :--: | :----: | :--: |
|  1   | id_card |   varchar   | 18 |   0    |    N     |  Y   |       |   |
|  2   | room_id |   int   | 10 |   0    |    Y     |  N   |       |   |
|  3   | phone_number |   varchar   | 11 |   0    |    Y     |  N   |       |   |
|  4   | check_in_time |   datetime   | 19 |   0    |    N     |  N   |       |   |
|  5   | check_out_time |   datetime   | 19 |   0    |    Y     |  N   |       |   |
**表名：** <a id="repair">repair</a>

**说明：** 维修信息

**数据列：**

| 序号 | 名称 | 数据类型 |  长度  | 小数位 | 允许空值 | 主键 | 默认值 | 说明 |
| :--: | :--- | :------: | :----: | :----: | :------: | :--: | :----: | :--: |
|  1   | air_id |   int   | 10 |   0    |    N     |  N   |       | 空调  |
|  2   | id |   int   | 10 |   0    |    N     |  Y   |       | 维修编号  |
|  3   | description |   varchar   | 100 |   0    |    Y     |  N   |       | 故障描述  |
**表名：** <a id="room">room</a>

**说明：** 房间信息

**数据列：**

| 序号 | 名称 | 数据类型 |  长度  | 小数位 | 允许空值 | 主键 | 默认值 | 说明 |
| :--: | :--- | :------: | :----: | :----: | :------: | :--: | :----: | :--: |
|  1   | room_id |   int   | 10 |   0    |    N     |  Y   |       | 房间号  |
|  2   | status |   int   | 10 |   0    |    N     |  N   |   0    | 房间状态0：闲置1：使用中  |
